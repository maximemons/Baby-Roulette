const translations = {
  en: {
      title: "The reveal ðŸŽ°",
      congratsBoy: "It's a boy ! ðŸŽ‰",
      congratsGirl: "It's a girl ! ðŸŽ‰",
      failInit: "Can't find out! You have to create a new roulette first",
      failRoulette: "Fail! Try again... ðŸŽ²",
      newRoulette: "Create a new roulette",
      formNewRouletteTitle: "New roulette",
      formTitle: "Title",
      formTitlePH: "The reveal ðŸŽ°",
      formGender: "Gender",
      formGenderBoy: "Boy",
      formGenderGirl: "Girl",
      formSymbols: "Symbols",
      formOnSuccess: "On success",
      formOnSuccessPH: "It's a boy !ðŸŽ‰",
      formOnFail: "On fail",
      formOnFailPH: "Fail! Try again... ðŸŽ²",
      formCreate: "Create",
      formCancel: "Cancel",
      formShareLink: "Share this link to your close ones â¤ï¸",
      formShareCopy: "Copy",
      formShareCopied: "Copied",
      github: "View on GitHub",
      paypal: "Support via PayPal"
  },
  fr: {
      title: "La rÃ©vÃ©lation ðŸŽ°",
      congratsBoy: "C'est un garÃ§on ! ðŸŽ‰",
      congratsGirl: "C'est une fille ! ðŸŽ‰",
      failInit: "Aucune idÃ©e! CrÃ©e une nouvelle machine avant",
      failRoulette: "Presque! Essaie Ã  nouveau... ðŸŽ²",
      newRoulette: "CrÃ©er une nouvelle machine",
      formNewRouletteTitle: "Nouvelle machine",
      formTitle: "Titre",
      formTitlePH: "La rÃ©vÃ©lation ðŸŽ°",
      formGender: "Sexe",
      formGenderBoy: "GarÃ§on",
      formGenderGirl: "Fille",
      formSymbols: "Symboles",
      formOnSuccess: "RÃ©ussite",
      formOnSuccessPH: "C'est un garÃ§on !ðŸŽ‰",
      formOnFail: "Echec",
      formOnFailPH: "Presque! Essaie Ã  nouveau... ðŸŽ²",
      formCreate: "Valider",
      formCancel: "Annuler",
      formShareLink: "Partage ce lien Ã  tes proches â¤ï¸",
      formShareCopy: "Copier",
      formShareCopied: "CopiÃ©",
      github: "Voir sur GitHub",
      paypal: "Soutenir via PayPal"
  },
  es: {
      title: "La revelaciÃ³n ðŸŽ°",
      congratsBoy: "Â¡Es un niÃ±o! ðŸŽ‰",
      congratsGirl: "Â¡Es una niÃ±a! ðŸŽ‰",
      failInit: "Â¡No hay idea! Crea una nueva mÃ¡quina antes",
      failRoulette: "Â¡Casi! Intenta de nuevo... ðŸŽ²",
      newRoulette: "Crear una nueva mÃ¡quina",
      formNewRouletteTitle: "Nueva mÃ¡quina",
      formTitle: "TÃ­tulo",
      formTitlePH: "La revelaciÃ³n ðŸŽ°",
      formGender: "Sexo",
      formGenderBoy: "NiÃ±o",
      formGenderGirl: "NiÃ±a",
      formSymbols: "SÃ­mbolos",
      formOnSuccess: "Ã‰xito",
      formOnSuccessPH: "Â¡Es un niÃ±o! ðŸŽ‰",
      formOnFail: "Fracaso",
      formOnFailPH: "Â¡Casi! Intenta de nuevo... ðŸŽ²",
      formCreate: "Validar",
      formCancel: "Cancelar",
      formShareLink: "Comparte este enlace con tus seres queridos â¤ï¸",
      formShareCopy: "Copiar",
      formShareCopied: "Copiado",
      github: "Ver en GitHub",
      paypal: "Apoyar vÃ­a PayPal"
  },
  de: {
      title: "Die EnthÃ¼llung ðŸŽ°",
      congratsBoy: "Es ist ein Junge! ðŸŽ‰",
      congratsGirl: "Es ist ein MÃ¤dchen! ðŸŽ‰",
      failInit: "Keine Ahnung! Erstelle zuerst eine neue Maschine",
      failRoulette: "Fast! Versuch es nochmal... ðŸŽ²",
      newRoulette: "Neue Maschine erstellen",
      formNewRouletteTitle: "Neue Maschine",
      formTitle: "Titel",
      formTitlePH: "Die EnthÃ¼llung ðŸŽ°",
      formGender: "Geschlecht",
      formGenderBoy: "Junge",
      formGenderGirl: "MÃ¤dchen",
      formSymbols: "Symbole",
      formOnSuccess: "Erfolg",
      formOnSuccessPH: "Es ist ein Junge! ðŸŽ‰",
      formOnFail: "Fehlschlag",
      formOnFailPH: "Fast! Versuch es nochmal... ðŸŽ²",
      formCreate: "BestÃ¤tigen",
      formCancel: "Abbrechen",
      formShareLink: "Teile diesen Link mit deinen Liebsten â¤ï¸",
      formShareCopy: "Kopieren",
      formShareCopied: "Kopiert",
      github: "Auf GitHub ansehen",
      paypal: "Ãœber PayPal unterstÃ¼tzen"
  },
  it: {
      title: "La rivelazione ðŸŽ°",
      congratsBoy: "Ãˆ un maschio! ðŸŽ‰",
      congratsGirl: "Ãˆ una femmina! ðŸŽ‰",
      failInit: "Nessuna idea! Crea prima una nuova macchina",
      failRoulette: "Quasi! Riprova... ðŸŽ²",
      newRoulette: "Crea una nuova macchina",
      formNewRouletteTitle: "Nuova macchina",
      formTitle: "Titolo",
      formTitlePH: "La rivelazione ðŸŽ°",
      formGender: "Sesso",
      formGenderBoy: "Maschio",
      formGenderGirl: "Femmina",
      formSymbols: "Simboli",
      formOnSuccess: "Successo",
      formOnSuccessPH: "Ãˆ un maschio! ðŸŽ‰",
      formOnFail: "Fallimento",
      formOnFailPH: "Quasi! Riprova... ðŸŽ²",
      formCreate: "Conferma",
      formCancel: "Annulla",
      formShareLink: "Condividi questo link con i tuoi cari â¤ï¸",
      formShareCopy: "Copia",
      formShareCopied: "Copiato",
      github: "Visualizza su GitHub",
      paypal: "Supporta tramite PayPal"
  },
  pt: {
      title: "A revelaÃ§Ã£o ðŸŽ°",
      congratsBoy: "Ã‰ um menino! ðŸŽ‰",
      congratsGirl: "Ã‰ uma menina! ðŸŽ‰",
      failInit: "Sem ideia! Crie uma nova mÃ¡quina primeiro",
      failRoulette: "Quase! Tente novamente... ðŸŽ²",
      newRoulette: "Criar uma nova mÃ¡quina",
      formNewRouletteTitle: "Nova mÃ¡quina",
      formTitle: "TÃ­tulo",
      formTitlePH: "A revelaÃ§Ã£o ðŸŽ°",
      formGender: "Sexo",
      formGenderBoy: "Menino",
      formGenderGirl: "Menina",
      formSymbols: "SÃ­mbolos",
      formOnSuccess: "Sucesso",
      formOnSuccessPH: "Ã‰ um menino! ðŸŽ‰",
      formOnFail: "Falha",
      formOnFailPH: "Quase! Tente novamente... ðŸŽ²",
      formCreate: "Validar",
      formCancel: "Cancelar",
      formShareLink: "Compartilhe este link com seus entes queridos â¤ï¸",
      formShareCopy: "Copiar",
      formShareCopied: "Copiado",
      github: "Ver no GitHub",
      paypal: "Apoiar via PayPal"
  },
  nl: {
      title: "De onthulling ðŸŽ°",
      congratsBoy: "Het is een jongen! ðŸŽ‰",
      congratsGirl: "Het is een meisje! ðŸŽ‰",
      failInit: "Geen idee! Maak eerst een nieuwe machine",
      failRoulette: "Bijna! Probeer het opnieuw... ðŸŽ²",
      newRoulette: "Maak een nieuwe machine",
      formNewRouletteTitle: "Nieuwe machine",
      formTitle: "Titel",
      formTitlePH: "De onthulling ðŸŽ°",
      formGender: "Geslacht",
      formGenderBoy: "Jongen",
      formGenderGirl: "Meisje",
      formSymbols: "Symbolen",
      formOnSuccess: "Succes",
      formOnSuccessPH: "Het is een jongen! ðŸŽ‰",
      formOnFail: "Mislukking",
      formOnFailPH: "Bijna! Probeer het opnieuw... ðŸŽ²",
      formCreate: "Bevestigen",
      formCancel: "Annuleren",
      formShareLink: "Deel deze link met je dierbaren â¤ï¸",
      formShareCopy: "KopiÃ«ren",
      formShareCopied: "Gekopieerd",
      github: "Bekijk op GitHub",
      paypal: "Steunen via PayPal"
  }
};

export const allLangs = Object.keys(translations);
export let currentLang = allLangs.includes(navigator.language.toLowerCase().split("-")[0]) ? 
                    navigator.language.toLocaleLowerCase().split("-")[0] : 
                    "en";

export function t(key) {
    return translations[currentLang][key] || key;
}

export function initLangCombobox(langs, comboboxId) {
  let combo = document.getElementById(comboboxId);

  langs.forEach((lang) => {
    let liElement = document.createElement("li");
    liElement.setAttribute("data-lang", lang);
    liElement.innerText = lang.toUpperCase();

    combo.appendChild(liElement);
  });

  selectLang(currentLang, "toggleLangBtn");
}

export function selectLang(lang, comboboxId) {
  document.getElementById(comboboxId).innerText = lang + " â–¼"
  translateInitWebsite(lang);
}

export function translateInitWebsite(lang) {
  document.title = t("title");
  document.getElementById("theReveal").innerText = t("title");
  document.getElementById("form_openPopupBtn").innerText = t("formNewRouletteTitle");
  document.getElementById("formNewRouletteTitle").innerText = t("formNewRouletteTitle");
  document.getElementById("formTitle").innerText = t("formTitle");
  document.getElementById("form_title").setAttribute("placeholder", t("formTitlePH"));
  document.getElementById("formGender").innerText = t("formGender");
  document.getElementById("formGenderBoy").innerText = t("formGenderBoy");
  document.getElementById("formGenderGirl").innerText = t("formGenderGirl");
  document.getElementById("formSymbols").innerText = t("formSymbols");
  document.getElementById("formOnSuccess").innerText = t("formOnSuccess");
  document.getElementById("form_success").setAttribute("placeholder", t("formOnSuccessPH"));
  document.getElementById("formOnFail").innerText = t("formOnFail");
  document.getElementById("form_fail").setAttribute("placeholder", t("formOnFailPH"));
  document.getElementById("formCreate").innerText = t("formCreate");
  document.getElementById("formCancel").innerText = t("formCancel");
  document.getElementById("formShareLink").innerText = t("formShareLink");
  document.getElementById("form_copyBtn").innerText = t("formShareCopy");
  document.getElementById("github").innerText = t("github");
  document.getElementById("paypal").innerText = t("paypal");
}

const toggleBtn = document.getElementById('toggleLangBtn');
const langList = document.getElementById('langList');

toggleBtn.addEventListener('click', () => {
  langList.style.display = langList.style.display === 'block' ? 'none' : 'block';
});

langList.querySelectorAll('li').forEach(item => {
  item.addEventListener('click', () => {
    const selectedLang = item.getAttribute('data-lang');
    langList.style.display = 'none';
    currentLang = selectedLang;
    selectLang(currentLang, "toggleLangBtn");
  });
});

/*document.addEventListener('click', (event) => {
  if (!document.getElementById('langSwitcher').contains(event.target)) {
    langList.style.display = 'none';
  }
});*/