<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The reveal üé∞</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="form.css" />
</head>

<body>
  <!-- MAIN -->
  <div class="container">
    <h1 id="theReveal">The reveal üé∞</h1>
    <div class="machine">
      <div class="slots">
        <div class="slot"><div class="reel" id="slot1"></div></div>
        <div class="slot"><div class="reel" id="slot2"></div></div>
        <div class="slot"><div class="reel" id="slot3"></div></div>
      </div>
      <div class="lever-container">
        <div class="lever attention" id="lever">
          <div class="ball"></div>
        </div>
      </div>
    </div>
    <p id="result"></p>
  </div>
  <canvas id="fireworks"></canvas>

  <button id="form_openPopupBtn" style="display: none">Create a new roulette</button>

  <div class="form_overlay" id="form_popupOverlay">
    <div class="form_popup">
      <h2 id="formNewRouletteTitle">New roulette</h2>
      <form id="form_popupForm">
        <label id="formTitle" for="form_title">Title :</label>
        <input type="text" id="form_title" name="form_title" placeholder="The reveal üé∞">

        <label id="formGender" for="form_gender">Gender :</label>
        <select id="form_gender" name="form_gender" onchange="form_changeGender(this)">
          <option id="formGenderBoy" value="1">Boy</option>
          <option id="formGenderGirl" value="2">Girl</option>
        </select>

        <label id="formSymbols">Symbols :</label>
        <div class="form_emojiContainer">
          <input type="text" class="form_emojiInput" id="form_emoji1" maxlength="2" placeholder="‚ôÇÔ∏è">
          <input type="text" class="form_emojiInput" id="form_emoji2" maxlength="2" placeholder="‚ôÄÔ∏è">
        </div>

        <label id="formOnSuccess" for="form_success">On success :</label>
        <input type="text" id="form_success" name="form_success" placeholder="It's a boy !üéâ">

        <label id="formOnFail" for="form_fail">On fail :</label>
        <input type="text" id="form_fail" name="form_fail" placeholder="Fail ! Try again...">

        <div class="form_buttonRow">
          <button id="formCreate" type="submit" class="form_buttonSubmit">Create</button>
          <button id="formCancel" type="button" class="form_buttonClose" onclick="form_closePopup()">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="form_overlay" id="form_resultPopupOverlay">
    <div class="form_popup" style="position: relative;">
      <button class="form_closeIcon" onclick="form_closeResult()">‚úï</button>
      <h2 id="formShareLink">Share this link to your close ones ‚ù§Ô∏è</h2>
      <div class="form_copySection">
        <input type="text" id="form_formDataDisplay" class="form_copyInput" readonly>
        <button class="form_copyBtn" id="form_copyBtn">Copy</button>
      </div>
    </div>
  </div>

  <div style="display: none" id="langSwitcher">
    <button id="toggleLangBtn">Langues ‚ñº</button>
    <ul id="langList">
    </ul>
  </div>

  <script type="module">
    import { init } from './js/script.js';
    import { selectAndCloseLangList } from './js/i18n.js';
    init();
  </script>

  <!--script src="script.js"></script>
  <script src="form.js"></script-->

  <script>
    const toggleBtn = document.getElementById('toggleLangBtn');
    const langList = document.getElementById('langList');

    toggleBtn.addEventListener('click', () => {
      langList.style.display = langList.style.display === 'block' ? 'none' : 'block';
    });

    // Exemple: afficher la langue choisie dans la console
    langList.querySelectorAll('li').forEach(item => {
      item.addEventListener('click', () => {
        const selectedLang = item.getAttribute('data-lang');
        langList.style.display = 'none';
        // Ici tu peux ajouter la logique pour changer la langue de ton app
        document.getElementById("toggleLangBtn").innerText = selectedLang + " ‚ñº";
        currentLang = selectedLang;
        translateWS();
      });
    });

    // Clic en dehors du menu pour fermer
    document.addEventListener('click', (event) => {
      if (!document.getElementById('langSwitcher').contains(event.target)) {
        langList.style.display = 'none';
      }
    });
  </script>

  <!-- counterAPI library, insert anywhere on the page. -->
<script src="https://counterapi.com/c.js" async ></script>
<!-- Add the counter instance somewhere to your template... -->
<div class="counterapi" style="min-height:44px;display:none" ></div>

  <footer>
    <center>
      <table>
        <tr>
          <td colspan="2">
            <span>&copy;<span id="year"></span> Maxime Mons. Tous droits r√©serv√©s.</span>
          </td>
        </tr>
        <tr>
          <td>
            <center><a href="https://github.com/maximemons/Baby-Roulette" target="_blank" class="footer-link" id="github">Voir sur GitHub</a></center>
          </td>
          <td>
            <center><a href="https://www.paypal.com/donate/?hosted_button_id=MBLHARVDYVX2S" target="_blank" class="footer-link" id=paypal>Soutenir via PayPal</a></center>
          </td>
        </tr>
      </table>
    </center>
</footer>
</body>
</html>